<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>DRAFT: Nested Repositories | Tales of Industry</title>
<meta name="keywords" content="">
<meta name="description" content="How to properly create and update repositories within repositories.
Why would you do such a thing? It&rsquo;s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the &ldquo;noise&rdquo; in the commit log and signal different ownership or maturity levels.
Scenario 1: I don&rsquo;t want to modify the nested repository
You want to clone a repository within the directory tree of your own repository. Don&rsquo;t use git clone, use git add submodule. This avoids problems associated with having multiple .git directories within the same directory tree.">
<meta name="author" content="Jan Scholz">
<link rel="canonical" href="http://localhost:1313/post/2022-03-05-nested-repositories/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f689a0f4dbe4498657f258203900979e0690d357488ff8a6a3b36a38f0c5124f.css" integrity="sha256-9omg9NvkSYZX8lggOQCXngaQ01dIj/imo7NqOPDFEk8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/images/faviconT.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/post/2022-03-05-nested-repositories/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-6NMJL1CGE7"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-6NMJL1CGE7');
        }
      </script><meta property="og:title" content="DRAFT: Nested Repositories" />
<meta property="og:description" content="How to properly create and update repositories within repositories.
Why would you do such a thing? It&rsquo;s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the &ldquo;noise&rdquo; in the commit log and signal different ownership or maturity levels.
Scenario 1: I don&rsquo;t want to modify the nested repository
You want to clone a repository within the directory tree of your own repository. Don&rsquo;t use git clone, use git add submodule. This avoids problems associated with having multiple .git directories within the same directory tree." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2022-03-05-nested-repositories/" />
<meta property="og:image" content="http://localhost:1313/images/drafts/busykitchen.jpg" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-09-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-01T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/drafts/busykitchen.jpg" />
<meta name="twitter:title" content="DRAFT: Nested Repositories"/>
<meta name="twitter:description" content="How to properly create and update repositories within repositories.
Why would you do such a thing? It&rsquo;s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the &ldquo;noise&rdquo; in the commit log and signal different ownership or maturity levels.
Scenario 1: I don&rsquo;t want to modify the nested repository
You want to clone a repository within the directory tree of your own repository. Don&rsquo;t use git clone, use git add submodule. This avoids problems associated with having multiple .git directories within the same directory tree."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "DRAFT: Nested Repositories",
      "item": "http://localhost:1313/post/2022-03-05-nested-repositories/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "DRAFT: Nested Repositories",
  "name": "DRAFT: Nested Repositories",
  "description": "How to properly create and update repositories within repositories.\nWhy would you do such a thing? It\u0026rsquo;s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the \u0026ldquo;noise\u0026rdquo; in the commit log and signal different ownership or maturity levels.\nScenario 1: I don\u0026rsquo;t want to modify the nested repository You want to clone a repository within the directory tree of your own repository. Don\u0026rsquo;t use git clone, use git add submodule. This avoids problems associated with having multiple .git directories within the same directory tree.\n",
  "keywords": [
    
  ],
  "articleBody": "How to properly create and update repositories within repositories.\nWhy would you do such a thing? It’s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the “noise” in the commit log and signal different ownership or maturity levels.\nScenario 1: I don’t want to modify the nested repository You want to clone a repository within the directory tree of your own repository. Don’t use git clone, use git add submodule. This avoids problems associated with having multiple .git directories within the same directory tree.\nThis process has, however, one drawback. I most cases, e.g. when you are adding a submodule for someone else’s theme or plugin, you might not have write access to that remote repository. You can still pull updates from upstream by using git pull from within the submodule directory, but you won’t be able to push your changes to remote. Choose this approach only if you’re not planning to modify the submodule yourself (or if you have way to commit changes).\nSummary of the commands:\n# change to the parent repo's subdirectory # where you want to place the submodule cd parent-repo/some/directory # clone the submodule git add submodule https://github.com/username/submodule.git # update submodule automatically ... cd parent-repo/some/directory/submodule git pull # ... or preview changes before updating git fetch origin git status Scenario 2: I want to modify the nested repository You can take the following approach [^1] if you do not have write access to the remote submodule repository.\ngit submodule add --depth 1 --force https://github.com/forestryio/hugo-theme-novela.git hugo-theme-novela Links [^1] How to Set Up a Hugo Site on Github Pages - with Git Submodules! [^2] Hugo Themes - Making Modifications while Keeping the Source Up-To-Date\n",
  "wordCount" : "291",
  "inLanguage": "en",
  "image":"http://localhost:1313/images/drafts/busykitchen.jpg","datePublished": "2022-09-01T00:00:00Z",
  "dateModified": "2022-09-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jan Scholz"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/post/2022-03-05-nested-repositories/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tales of Industry",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/images/faviconT.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Tales of Industry (Alt + H)">Tales of Industry</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/post/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      DRAFT: Nested Repositories
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2022-09-01 00:00:00 +0000 UTC'>September 1, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Jan Scholz

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="http://localhost:1313/images/drafts/busykitchen.jpg" alt="A photo of a busy kitchen">
        <p>It&rsquo;s going to get busy.</p>
</figure>
  <div class="post-content"><p>How to properly create and update repositories within repositories.</p>
<p>Why would you do such a thing? It&rsquo;s a way to keep the commit and branch history of a nested repository separate from the parent directory, for example, to reduce the &ldquo;noise&rdquo; in the commit log and signal different ownership or maturity levels.</p>
<h2 id="scenario-1-i-dont-want-to-modify-the-nested-repository">Scenario 1: I don&rsquo;t want to modify the nested repository<a hidden class="anchor" aria-hidden="true" href="#scenario-1-i-dont-want-to-modify-the-nested-repository">#</a></h2>
<p>You want to clone a repository within the directory tree of your own repository. Don&rsquo;t use <code>git clone</code>, use <code>git add submodule</code>. This avoids problems associated with having multiple <code>.git</code> directories within the same directory tree.</p>
<p>This process has, however, one drawback. I most cases, e.g. when you are adding a submodule for someone else&rsquo;s theme or plugin, you might not have write access to that remote repository. You can still pull updates from upstream by using <code>git pull</code> from within the submodule directory, but you won&rsquo;t be able to push your changes to remote. Choose this approach only if you&rsquo;re not planning to modify the submodule yourself (or if you have way to commit changes).</p>
<p>Summary of the commands:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># change to the parent repo&#39;s subdirectory </span>
</span></span><span class="line"><span class="cl"><span class="c1"># where you want to place the submodule</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> parent-repo/some/directory
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># clone the submodule</span>
</span></span><span class="line"><span class="cl">git add submodule https://github.com/username/submodule.git
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># update submodule automatically ...</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> parent-repo/some/directory/submodule
</span></span><span class="line"><span class="cl">git pull
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ... or preview changes before updating</span>
</span></span><span class="line"><span class="cl">git fetch origin
</span></span><span class="line"><span class="cl">git status
</span></span></code></pre></div><h2 id="scenario-2-i-want-to-modify-the-nested-repository">Scenario 2: I want to modify the nested repository<a hidden class="anchor" aria-hidden="true" href="#scenario-2-i-want-to-modify-the-nested-repository">#</a></h2>
<p>You can take the following approach [^1] if you do not have write access to the remote submodule repository.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git submodule add --depth <span class="m">1</span> --force https://github.com/forestryio/hugo-theme-novela.git hugo-theme-novela
</span></span></code></pre></div><h2 id="links">Links<a hidden class="anchor" aria-hidden="true" href="#links">#</a></h2>
<p>[^1] <a href="https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/">How to Set Up a Hugo Site on Github Pages - with Git Submodules!</a>
[^2] <a href="https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/">Hugo Themes - Making Modifications while Keeping the Source Up-To-Date</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/post/2023-02-22-journey-to-domain-driven-design/">
    <span class="title">« Prev</span>
    <br>
    <span>DRAFT: Renouncing the Monolith</span>
  </a>
  <a class="next" href="http://localhost:1313/post/2022-07-31-mastering-the-command-line/">
    <span class="title">Next »</span>
    <br>
    <span>DRAFT: Mastering the Command Line</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Tales of Industry</a></span>
    <span>by Jan Scholz.</span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
